(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f17482c"],{"02a6":function(e,t,s){"use strict";s("3fa6")},"3fa6":function(e,t,s){},"4ef5":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main-setting"},[s("Navbar"),s("div",{staticClass:"setting"},[s("div",{staticClass:"setting__title"},[e._v("帳號設定")]),s("form",{staticClass:"setting__form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[s("div",{staticClass:"setting__form__item account at"},[s("label",{staticClass:"setting__form__item-title"},[e._v("帳號")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.account,expression:"user.account"}],staticClass:"setting__form__item-input account-input",attrs:{type:"text",name:"account",id:"account"},domProps:{value:e.user.account},on:{input:function(t){t.target.composing||e.$set(e.user,"account",t.target.value)}}})]),s("div",{staticClass:"setting__form__item name",class:{error:e.user.name.length>50}},[s("label",{staticClass:"setting__form__item-title"},[e._v("名稱")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],staticClass:"setting__form__item-input name",class:{error_input:e.user.name.length>50},attrs:{type:"text",name:"name",id:"name"},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}}),s("span",{staticClass:"remaining",class:{error_color:e.user.name.length>50}},[e._v(e._s(e._f("remainingFilter")(e.remaining))+" / 50")])]),s("div",{staticClass:"setting__form__item email"},[s("label",{staticClass:"setting__form__item-title"},[e._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"setting__form__item-input",attrs:{type:"email",name:"email",id:"email"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})]),s("div",{staticClass:"setting__form__item password"},[s("label",{staticClass:"setting__form__item-title"},[e._v("密碼")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"setting__form__item-input",attrs:{type:"password",name:"password",id:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),s("div",{staticClass:"setting__form__item passwordChecked"},[s("label",{staticClass:"setting__form__item-title"},[e._v("密碼確認")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.checkPassword,expression:"user.checkPassword"}],staticClass:"setting__form__item-input",attrs:{type:"password",name:"passwordChecked",id:"passwordChecked"},domProps:{value:e.user.checkPassword},on:{input:function(t){t.target.composing||e.$set(e.user,"checkPassword",t.target.value)}}})]),s("button",{staticClass:"setting__save btn",attrs:{disabled:e.isProcessing||e.user.name.length>50,type:"submit"}},[e._v(" "+e._s(e.isProcessing?"修改中":"儲存")+" ")])])])],1)},a=[],i=s("1da1"),n=s("5530"),u=(s("96cf"),s("b0c0"),s("d9e2"),s("d178")),c=s("2f62"),o=s("2fa3"),m=s("4cce"),l={name:"Setting",data:function(){return{user:{id:-1,account:"",name:"",email:"",password:"",checkPassword:""},isProcessing:!1}},computed:Object(n["a"])(Object(n["a"])({},Object(c["b"])(["currentUser"])),{},{remaining:function(){return 50-this.user.name.length?50-this.user.name.length:0}}),components:{Navbar:u["a"]},created:function(){this.fetchUser()},methods:{fetchUser:function(){this.user.id=this.currentUser.id,this.user.account=this.currentUser.account,this.user.name=this.currentUser.name,this.user.email=this.currentUser.email,this.user.password=this.currentUser.password,this.user.checkPassword=this.currentUser.checkPassword},handleSubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.user.account){t.next=4;break}return o["a"].fire({icon:"warning",title:"請輸入使用者帳號"}),t.abrupt("return");case 4:if(e.user.name){t.next=7;break}return o["a"].fire({icon:"warning",title:"請輸入使用者名稱"}),t.abrupt("return");case 7:if(e.user.email){t.next=10;break}return o["a"].fire({icon:"warning",title:"請輸入 email"}),t.abrupt("return");case 10:if(!(!e.user.password|!e.user.checkPassword)){t.next=13;break}return o["a"].fire({icon:"warning",title:"請輸入 password"}),t.abrupt("return");case 13:if(e.user.password===e.user.checkPassword){t.next=16;break}return o["a"].fire({icon:"warning",title:"password 不一致"}),t.abrupt("return");case 16:return t.next=18,m["a"].update({userId:e.user.id,account:e.user.account,email:e.user.email,name:e.user.name,password:e.user.password,checkPassword:e.user.checkPassword});case 18:if(s=t.sent,200===s.status){t.next=21;break}throw new Error(s.statusText);case 21:e.$store.dispatch("fetchCurrentUser"),o["a"].fire({icon:"success",title:"修改個人資料成功"}),e.$router.push("/home"),t.next=29;break;case 26:t.prev=26,t.t0=t["catch"](0),"Error: Acount or Email repeated!"===t.t0.response.data.message?o["a"].fire({icon:"error",title:"帳號或 email 重複，請重新輸入"}):o["a"].fire({icon:"error",title:"無法修改個人資料，請稍後再試"});case 29:case"end":return t.stop()}}),t,null,[[0,26]])})))()}},filters:{remainingFilter:function(e){return e<0?0:e}}},d=l,p=(s("02a6"),s("2877")),_=Object(p["a"])(d,r,a,!1,null,"7df82354",null);t["default"]=_.exports}}]);
//# sourceMappingURL=chunk-0f17482c.cca8b479.js.map