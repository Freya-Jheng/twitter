(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ce59149"],{"25ed":function(e,t,a){},"8d3f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"profile__tweets"},e._l(e.likedTweets,(function(t){return r("div",{key:t.id,staticClass:"profile__tweets__tweet"},[r("router-link",{staticClass:"profile__tweets__tweet__avatar",attrs:{to:""}},[r("img",{staticClass:"user-avatar",attrs:{src:t.Tweet.User.avatar,alt:""}})]),r("div",{staticClass:"profile__tweets__tweet__wrapper"},[r("div",{staticClass:"profile__tweets__tweet__wrapper__info"},[r("router-link",{staticClass:"profile__tweets__tweet__wrapper__info--name",attrs:{to:{name:"sub-profile-tweets",params:{id:t.Tweet.User.id}}}},[e._v(e._s(t.Tweet.User.name))]),r("div",{staticClass:"profile__tweets__tweet__wrapper__info--account"},[r("router-link",{staticClass:"router-link",attrs:{to:{name:"sub-profile-tweets",params:{id:t.Tweet.User.id}}}},[e._v(" "+e._s("@"+t.Tweet.User.account)+" ")]),e._v(" ・ "+e._s(e._f("fromNow")(t.createdAt))+" ")],1)],1),r("router-link",{staticClass:"profile__tweets__tweet__wrapper__tweet",attrs:{to:{name:"individual-tweet",params:{tweet_id:t.TweetId}}}},[e._v(" "+e._s(t.Tweet.description)+" ")]),r("div",{staticClass:"profile__tweets__tweet__wrapper__icons"},[r("div",{staticClass:"profile__tweets__tweet__wrapper__icons__comment"},[r("img",{staticClass:"profile__tweets__tweet__wrapper__icons__comment--icon",attrs:{src:a("5845"),alt:"","data-toggle":"modal","data-target":"#tweet-"+t.TweetId},on:{click:function(a){return e.handleClick(t)}}}),r("span",{staticClass:"profile__tweets__tweet__wrapper__icons__comment--count"},[e._v(e._s(t.Tweet.repliesCount))])]),r("div",{staticClass:"modal fade",attrs:{id:"tweet-"+t.TweetId,tabindex:"-1","aria-labelledby":"replyModal","aria-hidden":"true"}},[r("div",{staticClass:"modal-dialog"},[r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header"},[r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:e.handleCancel}},[r("span",{staticClass:"close--text",attrs:{"aria-hidden":"true"}},[e._v("×")])])]),r("div",{staticClass:"modal-body"},[r("div",{staticClass:"modal-body__tweet"},[r("div",{staticClass:"modal-body__tweet__user-avatar"},[t.User.avatar?r("img",{staticClass:"avatar",attrs:{src:t.User.avatar,alt:""}}):e._e()]),r("div",{staticClass:"modal-body__tweet__content"},[r("div",{staticClass:"modal-body__tweet__content__info"},[r("div",{staticClass:"modal-body__tweet__content__info--name"},[e._v(" "+e._s(t.User.name)+" ")]),r("div",{staticClass:"modal-body__tweet__content__info--account"},[e._v(" "+e._s("@"+t.User.account)+" ")]),r("div",{staticClass:"modal-body__tweet__content__info--time"},[e._v(" "+e._s(e._f("fromNow")(t.createdAt))+" ")])]),r("div",{staticClass:"modal-body__tweet__content__text"},[e._v(" "+e._s(t.description)+" ")]),r("div",{staticClass:"modal-body__tweet__content__reply-to"},[r("div",{staticClass:"modal-body__tweet__content__reply-to--reply"},[e._v(" 回覆給 ")]),r("div",{staticClass:"modal-body__tweet__content__reply-to--account"},[e._v(" "+e._s("@"+t.User.account)+" ")])])])]),r("div",{staticClass:"modal-body__reply"},[r("div",{staticClass:"modal-body__reply__user-avatar"},[t.User.avatar?r("img",{staticClass:"avatar",attrs:{src:t.User.avatar,alt:""}}):e._e()]),r("form",{staticClass:"reply",attrs:{action:""}},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.reply,expression:"reply"}],attrs:{placeholder:"推你的回覆",name:"reply-textarea",id:"reply-textarea",cols:"50",rows:"4"},domProps:{value:e.reply},on:{input:function(t){t.target.composing||(e.reply=t.target.value)}}})])])]),r("div",{staticClass:"modal-footer",class:{error:e.reply.length>140}},[r("button",{staticClass:"btn-modal button",attrs:{"data-dismiss":"modal",disabled:e.reply.length>140||0===e.reply.length},on:{click:function(a){return e.handleSubmit(t.TweetId)}}},[e._v(" 回覆 ")])])])])]),r("div",{staticClass:"profile__tweets__tweet__wrapper__icons__like"},[t.isLiked?e._e():r("img",{staticClass:"profile__tweets__tweet__wrapper__icons__like--icon",attrs:{src:a("c20a"),alt:""},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),e.addLike(t.Tweet.id)}}}),t.isLiked?r("img",{staticClass:"profile__tweets__tweet__wrapper__icons__like--icon",attrs:{src:a("e6bf"),alt:""},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),e.deleteLike(t.Tweet.id)}}}):e._e(),r("span",{staticClass:"profile__tweets__tweet__wrapper__icons__like--count"}),e._v(" "+e._s(t.likesCount)+" ")])])],1)],1)})),0)},s=[],i=a("5530"),n=a("1da1"),o=(a("96cf"),a("d9e2"),a("d81d"),a("4e82"),a("2fa3")),c=a("4cce"),_=a("2708"),l=a("6783"),d={name:"SubProfileLiked",data:function(){return{likedTweets:[],likesCount:0,reply:""}},watch:{"$route.params.id":{handler:function(e){this.fetchUserLiked(e)},deep:!0,immediate:!0}},mixins:[_["a"]],created:function(){},methods:{fetchUserLiked:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c["a"].getUserLiked({userId:e});case 3:if(r=a.sent,s=r.data,"error"!==s.status){a.next=7;break}throw new Error(s.message);case 7:t.likedTweets=s,t.likedTweets=t.likedTweets.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{likesCount:e.Tweet.likesCount,isLiked:!0})})),t.likedTweets=t.likedTweets.sort((function(e,t){return e.createdAt>t.createdAt?-1:e.Tweet.createdAt<t.Tweet.createdAt?1:0})),a.next=16;break;case 12:a.prev=12,a.t0=a["catch"](0),console.log(a.t0),o["a"].fire({icon:"error",title:"無法成功取的使用者按讚貼文！"});case 16:case"end":return a.stop()}}),a,null,[[0,12]])})))()},addLike:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,l["a"].addLike({tweetId:e});case 3:if(r=a.sent,s=r.data,"error"!==s.status){a.next=7;break}throw new Error(s.message);case 7:t.likedTweets=t.likedTweets.map((function(t){return t.Tweet.id!==e?t:Object(i["a"])(Object(i["a"])({},t),{},{isLiked:!0,likesCount:t.likesCount+1})})),a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log(a.t0),o["a"].fire({icon:"error",title:"無法成功按讚！"});case 14:case"end":return a.stop()}}),a,null,[[0,10]])})))()},deleteLike:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,l["a"].deleteLike({tweetId:e});case 3:if(r=a.sent,s=r.data,"error"!==s.status){a.next=7;break}throw new Error(s.message);case 7:t.likedTweets=t.likedTweets.map((function(t){return t.Tweet.id!==e?t:Object(i["a"])(Object(i["a"])({},t),{},{isLiked:!1,likesCount:t.likesCount-1})})),a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log(a.t0),o["a"].fire({icon:"error",title:"無法成功取消按讚！"});case 14:case"end":return a.stop()}}),a,null,[[0,10]])})))()},handleClick:function(e){this.tweetModal=e},handleCancel:function(){this.reply=""},handleSubmit:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,t.reply){a.next=3;break}return a.abrupt("return",!1);case 3:return a.next=5,l["a"].reply({tweetId:e,comment:t.reply});case 5:if(r=a.sent,s=r.data,"success"===s.status){a.next=9;break}throw new Error(s.message);case 9:t.likedTweets=t.likedTweets.map((function(t){return t.id!==e?t:Object(i["a"])(Object(i["a"])({},t),{},{repliesCount:t.repliesCount+1})})),a.next=16;break;case 12:a.prev=12,a.t0=a["catch"](0),console.log(a.t0),o["a"].fire({icon:"error",title:"無法新增回覆，請稍後再試"});case 16:case"end":return a.stop()}}),a,null,[[0,12]])})))()}}},u=d,w=(a("a0f4"),a("2877")),p=Object(w["a"])(u,r,s,!1,null,"010cf8ec",null);t["default"]=p.exports},a0f4:function(e,t,a){"use strict";a("25ed")}}]);
//# sourceMappingURL=chunk-2ce59149.20f39821.js.map